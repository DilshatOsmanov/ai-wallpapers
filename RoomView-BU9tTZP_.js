import{h as A,r as h,o as M,c as k,d as e,i as j,F as I,e as G,t as D,j as Y,k as O,l as J,m as z,p as K,n as w,q as L,s as Q}from"./index-Cw_6MNfa.js";const tt=async()=>await A.get("/rooms/view_room/"),et={class:"modal room-modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},lt={class:"modal-dialog"},ot={class:"modal-content"},at={class:"modal-body"},st={class:"room-modal__card-wrapper"},nt=["src"],it={class:"room-modal__card-title"},rt={class:"room-modal__card-inner"},dt={class:"room-modal__card-price"},vt=["onClick"],ct={__name:"RoomWallpaperModal",setup(Z){const c=h([{id:1,title:"Обои Cristiana Masi I Damaschi 23613",description:"Cristiana Masi всегда следит за качеством продукции. Данная модель обоев имеет артикул 23613. Виниловые обои часто используют как в квартирах, так и в загородных домах.",price:3e3,wallpaperImg:"/ai-wallpapers/wallpaper.jpg"},{id:2,title:"Обои Rasch Nubia",description:"Коллекция текстильных обоев Rasch Textil Nubia - творение немецких дизайнеров с выверенными линиями и формами гармонично сочетающимися друг с другом, как сообщающиеся сосуды.",price:3500,wallpaperImg:"/ai-wallpapers/wallpaper-2.jpg"},{id:3,title:"Обои Rasch Nubia 085180",description:"Коллекция текстильных обоев Rasch Textil Nubia - творение немецких дизайнеров с выверенными линиями и формами гармонично сочетающимися друг с другом, как сообщающиеся сосуды.",price:4500,wallpaperImg:"/ai-wallpapers/wallpaper-3.jpg"}]);return(l,i)=>(M(),k("div",et,[e("div",lt,[e("div",ot,[i[1]||(i[1]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбрать материал"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",at,[i[0]||(i[0]=j('<select class="form-select mb-3" aria-label="Material select"><option selected value="wallpaper">Обои</option><option value="1">Плитка</option><option value="2">Краска</option><option value="3">Панели</option></select>',1)),e("div",st,[(M(!0),k(I,null,G(c.value,s=>(M(),k("div",{class:"room-modal__card mb-3",style:{"max-width":"540px"},key:s.id},[e("div",null,[e("img",{src:s.wallpaperImg,class:"room-modal__card-img img-fluid",alt:"wallpaper"},null,8,nt),e("h5",it,D(s.title),1)]),e("div",rt,[e("p",dt,D(s.price.toLocaleString("ru-RU"))+" тг/рулон ",1),e("button",{class:"room-modal__card-btn btn btn-sm btn-primary",type:"button","data-bs-dismiss":"modal",onClick:r=>l.$emit("changeWallpaper",s==null?void 0:s.wallpaperImg)}," Выбрать ",8,vt)])]))),128))])])])])]))}},ut={class:"bg-light d-flex flex-column justify-content-between position-relative overflow-hidden"},pt={class:"navbar navbar-default navbar-fixed-top"},mt={class:"container"},wt={class:"room__wrapper"},gt={id:"h",class:"house"},ft={class:"wall-left__right face"},ht={class:"wall-right__left face"},bt={class:"wall-top__front face"},_t={class:"wall-bottom__back face"},E=1,X=3,yt=4,u=3,$t=2.5,v=27,xt=.9,Lt=1.8,Mt=.7,kt=1.3,Et=1.2,N=1,Xt=.1,Rt={__name:"RoomView",setup(Z){const c=h("/ai-wallpapers/wallpaper-4.jpg"),l=h(1);let i=50,s=45;const r=h(!0),d=h(-12);Y(async()=>{await tt()}),Y(()=>{const a=document.querySelector("#h"),t=document.body;let g=!1,R,C;const V=30,q=90,b=o=>{if(!g||[...t.classList].includes("modal-open"))return;const n=((o.pageX||o.touches[0].pageX)-R)/window.innerWidth*120,$=((o.pageY||o.touches[0].pageY)-C)/window.innerHeight*120;let m=i-$,x=s-n;T(x),m=Math.max(V,Math.min(q,m)),a.style.transform=`
      perspective(90vw)
      rotateX(${m}deg)
      rotateZ(${x}deg)
      translateZ(${d.value}vw)
    `,p()},_=o=>{g=!0,R=o.pageX||o.touches[0].pageX,C=o.pageY||o.touches[0].pageY},y=()=>{g=!1;const o=a.style.transform.match(/rotateX\((.*?)deg\) rotateZ\((.*?)deg\)/);o&&(i=parseFloat(o[1]),s=parseFloat(o[2]))},T=o=>{let n=o%360;n<0&&(n=-n),n>=0&&n<120||n>=300&&n<360?r.value=!0:n>=120&&n<300&&(r.value=!1)},P=o=>{o.preventDefault(),![...t.classList].includes("modal-open")&&(l.value+=o.deltaY/2*-.01,l.value=Math.max(E,Math.min(X,l.value)),d.value=-12-(l.value-1)*10,a.style.transform=`
      perspective(90vw)
      rotateX(${i}deg)
      rotateZ(${s}deg)
      translateZ(${d.value}vw)
    `,p())};let f=null;const U=.1,S=o=>{if(o.touches.length<2||[...t.classList].includes("modal-open"))return;const n=o.touches[0],$=o.touches[1],m=Math.hypot(n.pageX-$.pageX,n.pageY-$.pageY);f||(f=m);const x=1+(m-f)/f*U;l.value=Math.max(E,Math.min(X,l.value*x)),d.value=-12-(l.value-1)*10,a.style.transform=`
    perspective(90vw)
    rotateX(${i}deg)
    rotateZ(${s}deg)
    translateZ(${d.value}vw)
  `,p()},W=()=>{f=null};t.addEventListener("mousedown",_),t.addEventListener("mousemove",b),t.addEventListener("mouseup",y),t.addEventListener("wheel",P),t.addEventListener("touchstart",_),t.addEventListener("touchmove",b),t.addEventListener("touchmove",S),t.addEventListener("touchend",y),t.addEventListener("touchend",W),O(()=>{t.removeEventListener("mousedown",_),t.removeEventListener("mousemove",b),t.removeEventListener("mouseup",y),t.removeEventListener("wheel",P),t.removeEventListener("touchstart",_),t.removeEventListener("touchmove",b),t.removeEventListener("touchmove",S),t.removeEventListener("touchend",y),t.removeEventListener("touchend",W)}),p()});const B=()=>{l.value=Math.min(X,l.value+.05),d.value=-12-(l.value-1)*10,document.querySelector("#h").style.transform=`
    perspective(90vw)
    rotateX(${i}deg)
    rotateZ(${s}deg)
    translateZ(${d.value}vw)
  `,p()},F=()=>{l.value=Math.max(E,l.value-.05),d.value=-12-(l.value-1)*10,document.querySelector("#h").style.transform=`
    perspective(90vw)
    rotateX(${i}deg)
    rotateZ(${s}deg)
    translateZ(${d.value}vw)
  `,p()},p=()=>{const a=document.documentElement;a.style.setProperty("--room-width",`${v*l.value}vw`),a.style.setProperty("--room-length",`${v*yt*l.value/u}vw`),a.style.setProperty("--room-height",`${v*$t*l.value/u}vw`),a.style.setProperty("--door-width",`${v*xt*l.value/u}vw`),a.style.setProperty("--door-height",`${v*Lt*l.value/u}vw`),a.style.setProperty("--window-length",`${v*Mt*l.value/u}vw`),a.style.setProperty("--window-width",`${v*kt*l.value/u}vw`),a.style.setProperty("--window-height",`${v*Et*l.value/u}vw`),a.style.setProperty("--wall-depth",`${N*l.value}vw`),a.style.setProperty("--half-wall-depth",`${N*l.value/2}vw`),a.style.setProperty("--line-depth",`${Xt*l.value}vw`)},H=a=>{a==null||a==null||(c.value=a)};return(a,t)=>{const g=J("router-link");return M(),k(I,null,[t[21]||(t[21]=e("button",{type:"button",class:"order-btn btn btn-success btn-lg"},"Оформить заказ",-1)),e("section",ut,[e("nav",pt,[e("div",mt,[z(g,{to:{name:"images-upload-page"},class:"btn btn-secondary navbar-btn pull-left"},{default:K(()=>t[0]||(t[0]=[Q("Назад")])),_:1}),t[1]||(t[1]=e("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"btn btn-primary navbar-btn pull-right"}," Выбрать материал ",-1))])]),e("div",wt,[e("div",{class:"room__zoom-buttons"},[e("div",{class:"container"},[e("div",{class:"d-flex align-items-end justufy-content-center flex-column"},[e("button",{type:"button",class:"btn btn-dark mb-1",onClick:B},t[2]||(t[2]=[e("svg",{fill:"#fff",height:"15px",width:"15px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512","xml:space":"preserve"},[e("g",null,[e("g",null,[e("polygon",{points:"289.391,222.609 289.391,0 222.609,0 222.609,222.609 0,222.609 0,289.391 222.609,289.391 222.609,512     289.391,512 289.391,289.391 512,289.391 512,222.609   "})])])],-1)])),e("button",{type:"button",class:"btn btn-secondary",onClick:F},t[3]||(t[3]=[e("svg",{fill:"#fff",height:"16px",width:"15px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512","xml:space":"preserve"},[e("g",null,[e("g",null,[e("rect",{y:"222.609",width:"512",height:"66.783"})])])],-1)]))])])]),e("div",gt,[t[20]||(t[20]=j('<div class="floor"><div class="floor__front face"></div><div class="floor__back face"></div><div class="floor__right face"></div><div class="floor__left face"></div><div class="floor__top face"></div><div class="floor__bottom face"></div></div>',1)),e("div",{class:w(["wall-left",{active:!r.value}])},[t[4]||(t[4]=e("div",{class:"wall-left__front face"},null,-1)),e("div",ft,[e("span",{style:L(`background-image: url('${c.value}')`)},null,4),e("div",{class:w(["room-window",{active:!r.value}])},null,2)]),t[5]||(t[5]=e("div",{class:"wall-left__left face bordered"},null,-1)),t[6]||(t[6]=e("div",{class:"wall-left__top face"},null,-1)),t[7]||(t[7]=e("div",{class:"wall-left__bottom face"},null,-1))],2),e("div",{class:w(["wall-right",{active:r.value}])},[t[8]||(t[8]=e("div",{class:"wall-right__back face"},null,-1)),t[9]||(t[9]=e("div",{class:"wall-right__right face bordered"},null,-1)),e("div",ht,[e("span",{style:L(`background-image: url('${c.value}')`)},null,4)]),t[10]||(t[10]=e("div",{class:"wall-right__top face"},null,-1)),t[11]||(t[11]=e("div",{class:"wall-right__bottom face"},null,-1))],2),e("div",{class:w(["wall-top",{active:!r.value}])},[e("div",bt,[e("span",{style:L(`background-image: url('${c.value}')`)},null,4),e("div",{class:w(["room-door",{active:!r.value}])},null,2)]),t[12]||(t[12]=e("div",{class:"wall-top__back face bordered"},null,-1)),t[13]||(t[13]=e("div",{class:"wall-top__top face"},null,-1)),t[14]||(t[14]=e("div",{class:"wall-top__bottom face"},null,-1)),t[15]||(t[15]=e("div",{class:"wall-top__right face"},null,-1))],2),e("div",{class:w(["wall-bottom",{active:r.value}])},[t[16]||(t[16]=e("div",{class:"wall-bottom__front face bordered"},null,-1)),e("div",_t,[e("span",{style:L(`background-image: url('${c.value}')`)},null,4)]),t[17]||(t[17]=e("div",{class:"wall-bottom__top face"},null,-1)),t[18]||(t[18]=e("div",{class:"wall-bottom__bottom face"},null,-1)),t[19]||(t[19]=e("div",{class:"wall-bottom__left face"},null,-1))],2)])])]),z(ct,{onChangeWallpaper:H})],64)}}};export{Rt as default};
